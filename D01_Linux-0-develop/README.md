
# Операционные системы UNIX/Linux (Базовый).
Установка и обновления системы Linux. Основы администрирования.

## Contents
1 [Установка ОС](#part-1-установка-ос)  
2 [Создание пользователя](#part-2-создание-пользователя)  
3 [Настройка сети ОС](#part-3-настройка-сети-ос)   
4 [Обновление ОС](#part-4-обновление-ос)  
5 [Использование команды  sudo](#part-5-использование-команды-sudo)  
6 [Установка и настройка службы времени](#part-6-установка-и-настройка-службы-времени)  
7 [Установка и использование текстовых редакторов](#part-7-установка-и-использование-текстовых-редакторов)  
8 [Установка и базовая настройка сервиса SSHD](#part-8-установка-и-базовая-настройка-сервиса-sshd)   
9 [Установка и использование утилит top, htop](#part-9-установка-и-использование-утилит-top-htop)   
10 [Использование утилиты fdisk](#part-10-использование-утилиты-fdisk)   
11 [Использование утилиты df](#part-11-использование-утилиты-df)
12 [Использование утилиты du](#part-12-использование-утилиты-du)
13 [Установка и использование утилиты ncdu](#part-13-установка-и-использование-утилиты-ncdu)    
14 [Работа с системными журналами](#part-14-работа-с-системными-журналами)     
15 [Использование планировщика заданий CRON](#part-15-использование-планировщика-заданий-cron)    

## Part-1-установка-ос
Установка состоит из основных шагов:
Загрузка образа
Запись на загрузочный носитель
Запуск установщика образа
Выбор языка
Обновление загрузщика(опционально)
Настройки раскладки, сети, прокси, ssh, выбор сервера репозитория,
Разметка диска
Создание пользователя, настройка имени машины
Выбор приложений для установки

После завершения установки и перезагрузки, авторизуемся в системе, вводя логин и пароль. Для того, чтобы проверить версию ОС:

![linux](https://i.ibb.co/Z6jtXhm/1-1.png "Cкриншот с выводом команды    `cat /etc/issue.`")

 - Cкриншот с выводом команды `cat /etc/issue.`

## Part-2-создание-пользователя
Вся информация о пользователях находится в файле `/etc/passwd`.
Команда useradd позволяет зарегистрировать нового пользователя или изменить информацию об уже имеющемся.
**useradd опции имя_пользователя**

В Linux есть довольно значительное количество системных групп. Их предназначение заключается в распределении доступа к системным ресурсам.
Группа adm предоставляет доступ к директории `/var/log/`
<a href="https://ibb.co/RP2J2DD"><img src="https://i.ibb.co/2Pqpqkk/Screenshot-1.png" alt="Screenshot-1" border="0"></a>
- Cкриншот вызова команды для создания пользователя и с вывод команды `cat /etc/passwd`

## Part-3-настройка-сети-ос
<a href="https://imgbb.com/"><img src="https://i.ibb.co/j8HSGZH/Screenshot-3.png" alt="Screenshot-3" border="0"></a>

 - Посмотреть текущее имя компьютера можно выполнив команду
   **hostnamectl**.     Для изменения **hostnamectl set-hostname    'новое имя'**
   
##### Установить временную зону, соответствующую текущему местоположению. 
Проверить текущее системное время можно с помощью утилиты `date`
Наиболее популярный и поддерживаемый в большинстве дистрибутивов способ установки часового пояса для всех пользователей - с помощью символической ссылки `/etc/localtime` на файл нужного часового пояса.
 Список доступных часовых поясов можно посмотреть командой: `ls /usr/share/zoneinfo/`, текущий часовой пояс через `ls -l /etc/localtime`.
Для создания символической ссылки используйте команду `ln -sf`. -   **-f** - удалять существующие ссылки;-   **-s** - создать символическую ссылку. Файл зоны нужно выбрать из доступных в системе.
*ln опции файл_источник файл_ссылки*

 - <a href="https://ibb.co/ynjxpy3"><img
   src="https://i.ibb.co/GvSr92h/Screenshot-4.png" alt="Screenshot-4"
   border="0"></a>
   Установка временной зоны 

##### Вывести названия сетевых интерфейсов с помощью консольной команды.
Интерфейсом с точки зрения ОС является устройство, через которое система получает и передает IP-пакеты.
Наиболее часто для этого используется программа **ifconfig** (ее название происходит от “interface configuration”). Но команда ‘ifconfig’ устарела в последних версиях Linux. Поэтому вы можете использовать команду ‘ip’ для отображения сетевых интерфейсов - `ip link show` или `ip -s link`.

 - <a href="https://ibb.co/y69Nb6r"><img
   src="https://i.ibb.co/ZBjfkB0/Screenshot-5.png" alt="Screenshot-5"
   border="0"></a> 
   Название сетевых интерфейсов с помощью
   консольной команды

Тогда вы в ответ можете получить информацию о параметрах вашей Ethernet-карты и так называемого “кольцевого интерфейса” или “обратной петли” – Local Loopback (интерфейс Ethernet при единственной сетевой карте обозначается как eth0, а кольцевой интерфейс – как lo).
Он может быть использован сетевым клиентским программным обеспечением, чтобы общаться с серверным приложением, расположенным на том же компьютере. То есть если на компьютере, на котором запущен веб-сервер, указать в веб-браузере URL http://127.0.0.1/ или http://localhost/, то он попадает на веб-сайт этого компьютера. 



##### Используя консольную команду получить ip адрес устройства, на котором вы работаете, от DHCP сервера. 
- В отчёте дать расшифровку DHCP.  
##### Определить и вывести на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw). 
##### Задать статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (использовать публичный DNS серверы, например 1.1.1.1 или 8.8.8.8).  
##### Перезагрузить виртуальную машину. Убедиться, что статичные сетевые настройки (ip, gw, dns) соответствуют заданным в предыдущем пункте.  

- В отчёте опишите, что сделали для выполнения всех семи пунктов (можно как текстом, так и скриншотами).
- Успешно пропинговать удаленные хосты 1.1.1.1 и ya.ru и вставить в отчёт скрин с выводом команды.

## Part-4-обновление-ос

`-` Ты спросишь меня: "Готова ли теперь система?". Не готова она совсем! Мы же ещё не обновили её до последней версии.

**== Задание ==**

##### Обновить систему до последней на момент выполнения задания версии.  

- После обновления системы, если ввести команду обновления повторно, должно появится сообщение, что обновления отсутствуют.
- Вставить скриншот с этим сообщением в отчёт.

## Part-5-использование-команды-sudo

`-` Как часто тебе в детстве говорили, что ты забыл сказать "волшебное" слово? Одним из таких "волшебных" слов было "пожалуйста". В Linux есть его аналог - _sudo_. Система не станет выполнять некоторые операции, пока не услышит "волшебное" слово.

**== Задание ==**

##### Разрешить пользователю, созданному в [Part 2](#part-2-создание-пользователя), выполнять команду sudo.

- В отчёте объяснить *истинное* назначение команды sudo (про то, что это слово - "волшебное", писать не стоит).  
- Поменять hostname ОС от имени пользователя, созданного в пункте [Part 2](#part-2-создание-пользователя). (используя sudo).
- Вставить скрин с изменённым hostname в отчёт.

## Part-6-установка-и-настройка-службы-времени

`-` Хоть у нас сейчас и стоит правильное время, оно может быть таким не всегда. Чтобы не настраивать его каждый раз самим, существуют службы синхронизации времени.

**== Задание ==**

##### Настроить службу автоматической синхронизации времени.  

- Вывести время, часового пояса, в котором вы сейчас находитесь.
- Вывод следующей команды должен содержать `NTPSynchronized=yes`: \
  `timedatectl status`
- Вставить скрины с корректным временем и выводом команды в отчёт.

## Part-7-установка-и-использование-текстовых-редакторов

`-` Думаю мы готовы перейти к одному из самых страшных этапов. На висящей на стене карте мира, вы указываете в сторону Нидерландов.

`-` Здесь, Брам Моленар разгадал тайны гармонии и внутренней концентрации. \
Именно здесь, 2 ноября 1991 года, вышла первая версия VIM. \
Ты хочешь научиться работать в VIM?

`-` Да.

`-` Тогда я и есть твой мастер.

`-` Хорошо...

`-` Только не плачь.

`-` Ладно..

**== Задание ==**

##### Установить текстовые редакторы **VIM** (+ любые два по желанию **NANO**, **MCEDIT**, **JOE** и т.д.)  
##### Используя каждый из трех выбранных редакторов, создайте файл *test_X.txt*, где X -- название редактора, в котором создан файл. Напишите в нём свой никнейм, закройте файл с сохранением изменений.  
- В отчёт вставьте скриншоты:
  - Из каждого редактора с содержимым файла перед закрытием.
- В отчёте укажите, что сделали для выхода с сохранением изменений.
##### Используя каждый из трех выбранных редакторов, откройте файл на редактирование, отредактируйте файл, заменив никнейм на строку "21 School 21", закройте файл без сохранения изменений.
- В отчёт вставьте скриншоты:
    - Из каждого редактора с содержимым файла после редактирования.
- В отчёте укажите, что сделали для выхода без сохранения изменений.
##### Используя каждый из трех выбранных редакторов, отредактируйте файл ещё раз (по аналогии с предыдущим пунктом), а затем освойте функции поиска по содержимому файла (слово) и замены слова на любое другое.
- В отчёт вставьте скриншоты:
    - Из каждого редактора с результатами поиска слова.
    - Из каждого редактора с командами, введёнными для замены слова на другое.

## Part-8-установка-и-базовая-настройка-сервиса-sshd

`-` Удобно иметь доступ от одного компьютера к другому по сети, правда? Но чтобы это было не только удобно, но и безопасно, стоит использовать сервис SSH.

**== Задание ==**

##### Установить службу SSHd.  
##### Добавить автостарт службы при загрузке системы.  
##### Перенастроить службу SSHd на порт 2022.  
##### Используя команду ps, показать наличие процесса sshd. Для этого к команде нужно подобрать ключи.
- В отчёте объяснить значение команды и каждого ключа в ней.
##### Перезагрузить систему.
- В отчёте опишите, что сделали для выполнения всех пяти пунктов (можно как текстом, так и скриншотами).
- Вывод команды netstat -tan должен содержать  \
`tcp 0 0 0.0.0.0:2022 0.0.0.0:* LISTEN`  \
(если команды netstat нет, то ее нужно установить)
- Скрин с выводом команды вставить в отчёт.
- В отчёте объяснить значение ключей -tan, значение каждого столбца вывода, значение 0.0.0.0.

## Part-9-установка-и-использование-утилит-top-htop

`-` Если бы меня спросили, что полезного делают утилиты **top** и **htop**, я бы ответил одним словом - всё.

**== Задание ==**

##### Установить и запустить утилиты top и htop.  

- По выводу команды top определить и написать в отчёте:
  - uptime
  - количество авторизованных пользователей
  - общую загрузку системы
  - общее количество процессов
  - загрузку cpu
  - загрузку памяти
  - pid процесса занимающего больше всего памяти
  - pid процесса, занимающего больше всего процессорного времени
- В отчёт вставить скрин с выводом команды htop:
  - отсортированному по PID, PERCENT_CPU, PERSENT_MEM, TIME
  - отфильтрованному для процесса sshd
  - с процессом syslog, найденным, используя поиск 
  - с добавленным выводом hostname, clock и uptime  

## Part-10-использование-утилиты-fdisk

`-` Теперь давай разберёмся, как получить информацию о жёстком диске. Специально для тебя я собрал пару примеров работы с утилитой fdisk.

**== Задание ==**

##### Запустить команду fdisk -l.

- В отчёте написать название жесткого диска, его размер и количество секторов, а также размер swap.

## Part-11-использование-утилиты-df 

`-` Информацию о жёстком диске мы получили, но, зачастую, куда интереснее информация о дисковом пространстве, которую можно получить с помощью утилиты df.

**== Задание ==**

##### Запустить команду df.  
- В отчёте написать для корневого раздела (/):
  - размер раздела
  - размер занятого пространства
  - размер свободного пространства
  - процент использования
- Определить и написать в отчёт единицу измерения в выводе.  

##### Запустить команду df -Th.
- В отчёте написать для корневого раздела (/):
    - размер раздела
    - размер занятого пространства
    - размер свободного пространства
    - процент использования
- Определить и написать в отчёт тип файловой системы для раздела.

## Part-11-использование-утилиты-du 

`-` df - не единственный способ поучить информацию о дисковом пространстве. Сейчас расскажу про ещё один.

**== Задание ==**

##### Запустить команду du.
##### Вывести размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде)
##### Вывести размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя *)

- В отчёт вставить скрины с выводом всех использованных команд.

## Part-13-установка-и-использование-утилиты-ncdu

`-` Тебе, возможно, не очень понравился формат, в котором команда du выводит информацию. Я тебя прекрасно понимаю. Поэтому сейчас мы рассмотрим её улучшенную версию.

**== Задание ==**

##### Установить утилиту ncdu.
##### Вывести размер папок /home, /var, /var/log.

- Размеры должны примерно совпадать с полученными в [Part 12](#part-12-использование-утилиты-du).

- В отчёт вставить скрины с выводом использованных команд.

## Part-14-работа-с-системными-журналами

`-` Системному администратору иногда приходится просматривать события, происходившие в системе в недавнем прошлом. Для этого в Linux есть системные журналы.

**== Задание ==**

##### Открыть для просмотра:
##### 1. /var/log/dmesg
##### 2. /var/log/syslog
##### 3. /var/log/authlog  

- Написать в отчёте время последней успешной авторизации, имя пользователя и метод входа в систему.
- Перезапустить службу SSHd.
- Вставить в отчёт скрин с сообщением о рестарте службы (искать в логах).

## Part-15-использование-планировщика-заданий-cron

`-` Фух, наконец-то мы добрались до последней части моего долгого повествования. Сейчас я покажу программу, которая, помимо прочего, заметно упрощает периодический вызов других программ.

**== Задание ==**

##### Используя планировщик заданий, запустите команду uptime через каждые 2 минуты.
- Найти в системных журналах строчки (минимум две в заданном временном диапазоне) о выполнении.
- Вывести на экран список текущих заданий для CRON.
- Вставить в отчёт скрины со строчками о выполнении и списком текущих задач.

##### Удалите все задания из планировщика заданий.
- В отчёт вставьте скрин со списком текущих заданий для CRON.
